SmartPump's pump cycle logic rewritten using RxJs
